FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogYnVpbGRmYXJtLWFwYgppbWFnZTogZmVlZGhlbnJ5L2J1aWxkZmFybS1hcGIKZGVzY3Jp\
cHRpb246IFRoaXMgaXMgYSBzYW1wbGUgYXBwbGljYXRpb24gZ2VuZXJhdGVkIGJ5IGFwYiBpbml0\
CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6\
IE1vYmlsZSBDSS9DRAogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogZm9udC1pY29u\
IGljb24tamVua2lucwpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBN\
T0JJTEUgQlJPISEhCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRl\
cnM6CiAgICAtIG5hbWU6IEFORFJPSURfTElDRU5TRV9BR1JFRU1FTlQKICAgICAgZGVmYXVsdDog\
RmFsc2UKICAgICAgdHlwZTogYm9vbGVhbgogICAgICBkZXNjcmlwdGlvbjogIlRvIHVzZSB0aGUg\
TW9iaWxlIENJL0NEIHNlcnZpY2UgeW91IG11c3QgZmlyc3QgYWdyZWUgdG8gdGhlIEFuZHJvaWQg\
U0RLIExpY2Vuc2UgQWdyZWVtZW50LiBCeSBjaGVja2luZyB0aGlzIGJveCB5b3UgYXJlIGFncmVl\
aW5nIHRvIHRoZSBBbmRyb2lkIFNvZnR3YXJlIERldmVsb3BtZW50IEtpdCBMaWNlbnNlIGFncmVl\
bWVudCB3aGljaCBjYW4gYmUgcmVhZCBhdCB0aGUgZm9sbG93aW5nIFVSTDogaHR0cHM6Ly9kZXZl\
bG9wZXIuYW5kcm9pZC5jb20vc3R1ZGlvL3Rlcm1zLmh0bWwuIElmIHRoZSBib3ggaXMgbm90IGNo\
ZWNrZWQgdGhlIGluc3RhbGxlciB3aWxsIHRha2Ugbm8gYWN0aW9uLiIKICAgICAgdGl0bGU6IEFu\
ZHJvaWQgU0RLIExpY2Vuc2UgQWdyZWVtZW50CiAgICAgIHJlcXVpcmVkOiBUcnVlCgo="




COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
