FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci1hcGIKZGVzY3JpcHRpb246IE1vYmls\
ZSBDSS9DRCBzZXJ2aWNlIHRoYXQgaW50ZWdyYXRlcyB3aXRoIEplbmtpbnMgUGlwZWxpbmVzIHRv\
IHRlc3QgYW5kIGJ1aWxkIHlvdXIgbW9iaWxlIGJpbmFyaWVzLgpiaW5kYWJsZTogRmFsc2UKYXN5\
bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBtb2JpbGUtc2VydmljZQptZXRhZGF0YToKICBkaXNwbGF5\
TmFtZTogTW9iaWxlIENJL0NEIERldgogIGxvbmdEZXNjcmlwdGlvbjogIlRvIHVzZSB0aGUgTW9i\
aWxlIENJL0NEIHNlcnZpY2UgeW91IG11c3QgZmlyc3QgYWdyZWUgdG8gdGhlIEFuZHJvaWQgU0RL\
IExpY2Vuc2UgQWdyZWVtZW50LiBCeSBjaGVja2luZyB0aGlzIGJveCB5b3UgYXJlIGFncmVlaW5n\
IHRvIHRoZSBBbmRyb2lkIFNvZnR3YXJlIERldmVsb3BtZW50IEtpdCBMaWNlbnNlIGFncmVlbWVu\
dCB3aGljaCBjYW4gYmUgcmVhZCBhdCB0aGUgZm9sbG93aW5nIFVSTDogaHR0cHM6Ly9kZXZlbG9w\
ZXIuYW5kcm9pZC5jb20vc3R1ZGlvL3Rlcm1zLmh0bWxcblxuLiBJZiB0aGUgYm94IGlzIG5vdCBj\
aGVja2VkIHRoZSBpbnN0YWxsZXIgd2lsbCB0YWtlIG5vIGFjdGlvbi4iCiAgc2VydmljZU5hbWU6\
IGFlcm9nZWFyLWRpZ2dlcgogIGltYWdlVXJsOiAiaHR0cHM6Ly9hZXJvZ2Vhci5vcmcvaW1nL2Fl\
cm9nZWFyZGlnZ2VyX2ljb25fMzJweF9jcm9wcGVkLnBuZyIKICBkb2N1bWVudGF0aW9uVXJsOiAi\
aHR0cHM6Ly9hZXJvZ2Vhci5vcmcvZGlnZ2VyLyIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVk\
IEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogRGVm\
YXVsdCBwbGFuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6\
CiAgICAtIG5hbWU6IEFORFJPSURfTElDRU5TRV9BR1JFRU1FTlQKICAgICAgZGVmYXVsdDogIiIK\
ICAgICAgcGF0dGVybjogXnllcyQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRlc2NyaXB0aW9u\
OiAiVHlwZSAneWVzJyBhYm92ZSB0byBhY2NlcHQgdGhlIEFuZHJvaWQgU0RLIExpY2Vuc2UgQWdy\
ZWVtZW50LiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9zdHVkaW8vdGVybXMuaHRtbCIK\
ICAgICAgdGl0bGU6IEFuZHJvaWQgU0RLIExpY2Vuc2UgQWdyZWVtZW50CiAgICAgIHJlcXVpcmVk\
OiBUcnVlCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
