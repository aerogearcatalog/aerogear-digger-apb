FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci1hcGIKZGVzY3JpcHRpb246IE1vYmls\
ZSBDSXxDRCBpbnRlZ3JhdGVzIHdpdGggSmVua2lucyBQaXBlbGluZXMgdG8gdGVzdCBhbmQgYnVp\
bGQgeW91ciBtb2JpbGUgYmluYXJpZXMuCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwK\
dGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBNb2JpbGUg\
Q0l8Q0QKICBsb25nRGVzY3JpcHRpb246ICJUbyB1c2UgdGhlIE1vYmlsZSBDSXxDRCBzZXJ2aWNl\
IHlvdSBtdXN0IGZpcnN0IGFncmVlIHRvIHRoZSBBbmRyb2lkIFNESyBMaWNlbnNlIEFncmVlbWVu\
dCwgd2hpY2ggY2FuIGJlIHJlYWQgYXQgdGhlIGZvbGxvd2luZyBVUkw6IGh0dHBzOi8vZGV2ZWxv\
cGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sLlxuIElmIHRoZSBib3ggaXMgbm90IGNo\
ZWNrZWQgdGhlIGluc3RhbGxlciB3aWxsIHRha2Ugbm8gYWN0aW9uLiIKICBzZXJ2aWNlTmFtZTog\
YWVyb2dlYXItZGlnZ2VyCiAgaW1hZ2VVcmw6ICJodHRwOi8vZGVzaWduLmpib3NzLm9yZy9hZXJv\
Z2VhcmRpZ2dlci9sb2dvL2ZpbmFsL3BuZy9hZXJvZ2VhcmRpZ2dlcl9pY29uXzI1NnB4LnBuZyIK\
ICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9hZXJvZ2Vhci5vcmcvZGlnZ2VyLyIKICBwcm92\
aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0\
CiAgICBkZXNjcmlwdGlvbjogRGVmYXVsdCBwbGFuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0\
YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAtIG5hbWU6IEFORFJPSURfTElDRU5TRV9BR1JFRU1F\
TlQKICAgICAgZGVmYXVsdDogIiIKICAgICAgcGF0dGVybjogXnllcyQKICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgIGRlc2NyaXB0aW9uOiAiVHlwZSAneWVzJyBhYm92ZSB0byBhY2NlcHQgdGhlIEFu\
ZHJvaWQgU0RLIExpY2Vuc2UgQWdyZWVtZW50LiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNv\
bS9zdHVkaW8vdGVybXMuaHRtbCIKICAgICAgdGl0bGU6IEFuZHJvaWQgU0RLIExpY2Vuc2UgQWdy\
ZWVtZW50CiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQg\
U0RLCiAgICAtIG5hbWU6IEFORFJPSURfU0RLX0NPTkZJRwogICAgICBkZWZhdWx0OiB8CiAgICAg\
ICAgW2Jhc2VdCiAgICAgICAgdG9vbHMKICAgICAgICBwbGF0Zm9ybS10b29scwogCiAgICAgICAg\
W3BsYXRmb3Jtc10KICAgICAgICBhbmRyb2lkLTI3CiAgICAgICAgYW5kcm9pZC0yNgogICAgICAg\
IGFuZHJvaWQtMjUKICAgICAgICAgCiAgICAgICAgW2J1aWxkLXRvb2xzXQogICAgICAgIDI3LjAu\
MwogICAgICAgIDI3LjAuMgogICAgICAgIDI3LjAuMQogICAgICAgIDI2LjAuMgogICAgICAgIDI2\
LjAuMQogICAgICAgIDI2LjAuMAogICAgICAgIDI1LjAuMwogICAgICAgIDI1LjAuMgogICAgICAg\
ICAKICAgICAgICBbZXh0cmFzOmdvb2dsZV0KICAgICAgICBnb29nbGVfcGxheV9zZXJ2aWNlcwog\
ICAgICAgIG0ycmVwb3NpdG9yeQogICAgICAgICAKICAgICAgICBbZXh0cmFzOmFuZHJvaWRdCiAg\
ICAgICAgbTJyZXBvc2l0b3J5CiAgICAgICAgIAogICAgICAgIFtleHRyYXM6bTJyZXBvc2l0b3J5\
OmNvbTphbmRyb2lkOnN1cHBvcnQ6Y29uc3RyYWludDpjb25zdHJhaW50LWxheW91dF0KICAgICAg\
ICAxLjAuMAogICAgICAgIDEuMC4xCiAgICAgICAgMS4wLjIKICAgICAgICAgCiAgICAgICAgW2V4\
dHJhczptMnJlcG9zaXRvcnk6Y29tOmFuZHJvaWQ6c3VwcG9ydDpjb25zdHJhaW50OmNvbnN0cmFp\
bnQtbGF5b3V0LXNvbHZlcl0KICAgICAgICAxLjAuMAogICAgICAgIDEuMC4yCiAgICAgICAgIAog\
ICAgICAgIFtrZXlzdG9yZV0KICAgICAgICBhbGlhcz1BbmRyb2lkRGVidWdLZXkKICAgICAgICBu\
YW1lPUFHCiAgICAgICAgdW5pdD1BZXJvR2VhcgogICAgICAgIG9yZz1SZWRIYXQKICAgICAgICBs\
b2M9V2F0ZXJmb3JkCiAgICAgICAgc3RhdGU9V0QKICAgICAgICBjb3VudHJ5PUlSTAogICAgICAg\
IHN0b3JlcGFzcz1hbmRyb2lkCiAgICAgICAga2V5cGFzcz1hbmRyb2lkCiAgICAgIHR5cGU6IHN0\
cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgIGRlc2NyaXB0aW9uOiAiQW5k\
cm9pZCBTREsgY29uZmlnIGNvbnRlbnQiCiAgICAgIHRpdGxlOiBBbmRyb2lkIFNESyBwYWNrYWdl\
IGNvbmZpZwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdXBkYXRhYmxlOiBUcnVlCiAgICAg\
IGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQgU0RLCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
