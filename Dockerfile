FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci1hcGIKZGVzY3JpcHRpb246IE1vYmls\
ZSBDSS9DRCBzZXJ2aWNlIHRoYXQgaW50ZWdyYXRlcyB3aXRoIEplbmtpbnMgUGlwZWxpbmVzIHRv\
IHRlc3QgYW5kIGJ1aWxkIHlvdXIgbW9iaWxlIGJpbmFyaWVzLgpiaW5kYWJsZTogRmFsc2UKYXN5\
bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBtb2JpbGUtc2VydmljZQptZXRhZGF0YToKICBkaXNwbGF5\
TmFtZTogTW9iaWxlIENJL0NECiAgbG9uZ0Rlc2NyaXB0aW9uOiAiVG8gdXNlIHRoZSBNb2JpbGUg\
Q0kvQ0Qgc2VydmljZSB5b3UgbXVzdCBmaXJzdCBhZ3JlZSB0byB0aGUgQW5kcm9pZCBTREsgTGlj\
ZW5zZSBBZ3JlZW1lbnQuIEJ5IGNoZWNraW5nIHRoaXMgYm94IHlvdSBhcmUgYWdyZWVpbmcgdG8g\
dGhlIEFuZHJvaWQgU29mdHdhcmUgRGV2ZWxvcG1lbnQgS2l0IExpY2Vuc2UgYWdyZWVtZW50IHdo\
aWNoIGNhbiBiZSByZWFkIGF0IHRoZSBmb2xsb3dpbmcgVVJMOiBodHRwczovL2RldmVsb3Blci5h\
bmRyb2lkLmNvbS9zdHVkaW8vdGVybXMuaHRtbFxuXG4uIElmIHRoZSBib3ggaXMgbm90IGNoZWNr\
ZWQgdGhlIGluc3RhbGxlciB3aWxsIHRha2Ugbm8gYWN0aW9uLiIKICBzZXJ2aWNlTmFtZTogYWVy\
b2dlYXItZGlnZ2VyLWFwYgogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogZm9udC1p\
Y29uIGljb24tamVua2lucwpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9u\
OiBEZWZhdWx0IHBsYW4KICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1l\
dGVyczoKICAgIC0gbmFtZTogQU5EUk9JRF9MSUNFTlNFX0FHUkVFTUVOVAogICAgICBkZWZhdWx0\
OiAiIgogICAgICBwYXR0ZXJuOiBeeWVzJAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3Jp\
cHRpb246ICJUeXBlICd5ZXMnIGFib3ZlIHRvIGFjY2VwdCB0aGUgQW5kcm9pZCBTREsgTGljZW5z\
ZSBBZ3JlZW1lbnQuIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5o\
dG1sIgogICAgICB0aXRsZTogQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1lbnQKICAgICAgcmVx\
dWlyZWQ6IFRydWUK"































COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
