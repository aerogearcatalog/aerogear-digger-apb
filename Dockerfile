FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci10ZXN0LWFwYgpkZXNjcmlwdGlvbjog\
TW9iaWxlIENJfENEIGludGVncmF0ZXMgd2l0aCBKZW5raW5zIFBpcGVsaW5lcyB0byB0ZXN0IGFu\
ZCBidWlsZCB5b3VyIG1vYmlsZSBiaW5hcmllcy4KYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRp\
b25hbAp0YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IE1v\
YmlsZSBDSXxDRCBUZXN0CiAgbG9uZ0Rlc2NyaXB0aW9uOiAiVG8gdXNlIHRoZSBNb2JpbGUgQ0l8\
Q0Qgc2VydmljZSB5b3UgbXVzdCBmaXJzdCBhZ3JlZSB0byB0aGUgQW5kcm9pZCBTREsgTGljZW5z\
ZSBBZ3JlZW1lbnQsIHdoaWNoIGNhbiBiZSByZWFkIGF0IHRoZSBmb2xsb3dpbmcgVVJMOiBodHRw\
czovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9zdHVkaW8vdGVybXMuaHRtbC5cbiBJZiB0aGUgYm94\
IGlzIG5vdCBjaGVja2VkIHRoZSBpbnN0YWxsZXIgd2lsbCB0YWtlIG5vIGFjdGlvbi4iCiAgc2Vy\
dmljZU5hbWU6IGFlcm9nZWFyLWRpZ2dlcgogIGltYWdlVXJsOiAiaHR0cDovL2Rlc2lnbi5qYm9z\
cy5vcmcvYWVyb2dlYXJkaWdnZXIvbG9nby9maW5hbC9wbmcvYWVyb2dlYXJkaWdnZXJfaWNvbl8y\
NTZweC5wbmciCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vZG9jcy5hZXJvZ2Vhci5vcmcv\
ZXh0ZXJuYWwvYXBiL21vYmlsZWNpY2QuaHRtbCIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVk\
IEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogRGVm\
YXVsdCBwbGFuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6\
CiAgICAtIG5hbWU6IEpFTktJTlNfVk9MVU1FX1NJWkUKICAgICAgZGVmYXVsdDogIjQwR2kiCiAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5IHRoZSB2\
b2x1bWUgc2l6ZSBmb3IgSmVua2lucyIKICAgICAgdGl0bGU6IFZvbHVtZSBTaXplIGZvciBKZW5r\
aW5zCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEplbmtpbnMKICAg\
IC0gbmFtZTogQU5EUk9JRF9MSUNFTlNFX0FHUkVFTUVOVAogICAgICBkZWZhdWx0OiAiIgogICAg\
ICBwYXR0ZXJuOiBeeWVzJAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246ICJU\
eXBlICd5ZXMnIGFib3ZlIHRvIGFjY2VwdCB0aGUgQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1l\
bnQuIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sIgogICAg\
ICB0aXRsZTogQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1lbnQKICAgICAgcmVxdWlyZWQ6IFRy\
dWUKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsKICAgIC0gbmFtZTogQU5EUk9JRF9T\
REtfVk9MVU1FX1NJWkUKICAgICAgZGVmYXVsdDogIjEwR2kiCiAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5IHRoZSB2b2x1bWUgc2l6ZSBmb3IgQW5k\
cm9pZCBTREsiCiAgICAgIHRpdGxlOiBWb2x1bWUgU2l6ZSBmb3IgQW5kcm9pZCBTREsKICAgICAg\
cmVxdWlyZWQ6IFRydWUKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsKICAgIC0gbmFt\
ZTogQU5EUk9JRF9TTEFWRV9DUFVfUkVRVUVTVAogICAgICBkZWZhdWx0OiAiNTAwbSIKICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgIGRlc2NyaXB0aW9uOiAiUGxlYXNlIHNwZWNpZnkgdGhlIENQVSBy\
ZXNvdXJjZSB0byByZXF1ZXN0IGZvciB0aGUgQW5kcm9pZCBzbGF2ZSBwb2RzIgogICAgICB0aXRs\
ZTogQ1BVIHJlc291cmNlIHRvIHJlcXVlc3QgZm9yIHRoZSBBbmRyb2lkIHNsYXZlIHBvZHMKICAg\
ICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQgU2xhdmUgUG9k\
cwogICAgLSBuYW1lOiBBTkRST0lEX1NMQVZFX0NQVV9MSU1JVAogICAgICBkZWZhdWx0OiAiMjAw\
MG0iCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5\
IHRoZSBDUFUgcmVzb3VyY2UgbGltaXQgZm9yIHRoZSBBbmRyb2lkIHNsYXZlIHBvZHMiCiAgICAg\
IHRpdGxlOiBDUFUgcmVzb3VyY2UgbGltaXQgZm9yIHRoZSBBbmRyb2lkIHNsYXZlIHBvZHMKICAg\
ICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQgU2xhdmUgUG9k\
cwogICAgLSBuYW1lOiBBTkRST0lEX1NMQVZFX01FTU9SWV9SRVFVRVNUCiAgICAgIGRlZmF1bHQ6\
ICI1MDBNaSIKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRlc2NyaXB0aW9uOiAiUGxlYXNlIHNw\
ZWNpZnkgdGhlIG1lbW9yeSByZXNvdXJjZSB0byByZXF1ZXN0IGZvciB0aGUgQW5kcm9pZCBzbGF2\
ZSBwb2RzIgogICAgICB0aXRsZTogTWVtb3J5IHJlc291cmNlIHRvIHJlcXVlc3QgZm9yIHRoZSBB\
bmRyb2lkIHNsYXZlIHBvZHMKICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIGRpc3BsYXlfZ3Jv\
dXA6IEFuZHJvaWQgU2xhdmUgUG9kcwogICAgLSBuYW1lOiBBTkRST0lEX1NMQVZFX01FTU9SWV9M\
SU1JVAogICAgICBkZWZhdWx0OiAiMzAwME1pIgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVz\
Y3JpcHRpb246ICJQbGVhc2Ugc3BlY2lmeSB0aGUgbWVtb3J5IHJlc291cmNlIGxpbWl0IGZvciB0\
aGUgQW5kcm9pZCBzbGF2ZSBwb2RzIgogICAgICB0aXRsZTogTWVtb3J5IHJlc291cmNlIGxpbWl0\
IGZvciB0aGUgQW5kcm9pZCBzbGF2ZSBwb2RzCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICBk\
aXNwbGF5X2dyb3VwOiBBbmRyb2lkIFNsYXZlIFBvZHMKICAgIC0gbmFtZTogQU5EUk9JRF9TREtf\
Q09ORklHCiAgICAgIGRlZmF1bHQ6IHwKICAgICAgICBbYmFzZV0KICAgICAgICB0b29scwogICAg\
ICAgIHBsYXRmb3JtLXRvb2xzCiAKICAgICAgICBbcGxhdGZvcm1zXQogICAgICAgIGFuZHJvaWQt\
MjcKICAgICAgICBhbmRyb2lkLTI2CiAgICAgICAgYW5kcm9pZC0yNQogICAgICAgICAKICAgICAg\
ICBbYnVpbGQtdG9vbHNdCiAgICAgICAgMjcuMC4zCiAgICAgICAgMjcuMC4yCiAgICAgICAgMjcu\
MC4xCiAgICAgICAgMjYuMC4yCiAgICAgICAgMjYuMC4xCiAgICAgICAgMjYuMC4wCiAgICAgICAg\
MjUuMC4zCiAgICAgICAgMjUuMC4yCiAgICAgICAgIAogICAgICAgIFtleHRyYXM6Z29vZ2xlXQog\
ICAgICAgIGdvb2dsZV9wbGF5X3NlcnZpY2VzCiAgICAgICAgbTJyZXBvc2l0b3J5CiAgICAgICAg\
IAogICAgICAgIFtleHRyYXM6YW5kcm9pZF0KICAgICAgICBtMnJlcG9zaXRvcnkKICAgICAgICAg\
CiAgICAgICAgW2V4dHJhczptMnJlcG9zaXRvcnk6Y29tOmFuZHJvaWQ6c3VwcG9ydDpjb25zdHJh\
aW50OmNvbnN0cmFpbnQtbGF5b3V0XQogICAgICAgIDEuMC4wCiAgICAgICAgMS4wLjEKICAgICAg\
ICAxLjAuMgogICAgICAgICAKICAgICAgICBbZXh0cmFzOm0ycmVwb3NpdG9yeTpjb206YW5kcm9p\
ZDpzdXBwb3J0OmNvbnN0cmFpbnQ6Y29uc3RyYWludC1sYXlvdXQtc29sdmVyXQogICAgICAgIDEu\
MC4wCiAgICAgICAgMS4wLjIKICAgICAgICAgCiAgICAgICAgW2tleXN0b3JlXQogICAgICAgIGFs\
aWFzPUFuZHJvaWREZWJ1Z0tleQogICAgICAgIG5hbWU9QUcKICAgICAgICB1bml0PUFlcm9HZWFy\
CiAgICAgICAgb3JnPVJlZEhhdAogICAgICAgIGxvYz1XYXRlcmZvcmQKICAgICAgICBzdGF0ZT1X\
RAogICAgICAgIGNvdW50cnk9SVJMCiAgICAgICAgc3RvcmVwYXNzPWFuZHJvaWQKICAgICAgICBr\
ZXlwYXNzPWFuZHJvaWQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4\
dGFyZWEKICAgICAgZGVzY3JpcHRpb246ICJBbmRyb2lkIFNESyBjb25maWcgY29udGVudCIKICAg\
ICAgdGl0bGU6IEFuZHJvaWQgU0RLIHBhY2thZ2UgY29uZmlnCiAgICAgIHJlcXVpcmVkOiBGYWxz\
ZQogICAgICB1cGRhdGFibGU6IFRydWUKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsK\
ICAgIAo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
