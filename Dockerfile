FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci10ZXN0LWFwYgpkZXNjcmlwdGlvbjog\
TW9iaWxlIENJfENEIGludGVncmF0ZXMgd2l0aCBKZW5raW5zIFBpcGVsaW5lcyB0byB0ZXN0IGFu\
ZCBidWlsZCB5b3VyIG1vYmlsZSBiaW5hcmllcy4KYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRp\
b25hbAp0YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IE1v\
YmlsZSBDSXxDRCBUZXN0CiAgbG9uZ0Rlc2NyaXB0aW9uOiAiVG8gdXNlIHRoZSBNb2JpbGUgQ0l8\
Q0Qgc2VydmljZSB5b3UgbXVzdCBmaXJzdCBhZ3JlZSB0byB0aGUgQW5kcm9pZCBTREsgTGljZW5z\
ZSBBZ3JlZW1lbnQsIHdoaWNoIGNhbiBiZSByZWFkIGF0IHRoZSBmb2xsb3dpbmcgVVJMOiBodHRw\
czovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9zdHVkaW8vdGVybXMuaHRtbC5cbiBJZiB0aGUgYm94\
IGlzIG5vdCBjaGVja2VkIHRoZSBpbnN0YWxsZXIgd2lsbCB0YWtlIG5vIGFjdGlvbi4iCiAgc2Vy\
dmljZU5hbWU6IGFlcm9nZWFyLWRpZ2dlcgogIGltYWdlVXJsOiAiaHR0cDovL2Rlc2lnbi5qYm9z\
cy5vcmcvYWVyb2dlYXJkaWdnZXIvbG9nby9maW5hbC9wbmcvYWVyb2dlYXJkaWdnZXJfaWNvbl8y\
NTZweC5wbmciCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vZG9jcy5hZXJvZ2Vhci5vcmcv\
ZXh0ZXJuYWwvYXBiL21vYmlsZWNpY2QuaHRtbCIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVk\
IEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogRGVm\
YXVsdCBwbGFuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6\
CiAgICAtIG5hbWU6IEFORFJPSURfTElDRU5TRV9BR1JFRU1FTlQKICAgICAgZGVmYXVsdDogIiIK\
ICAgICAgcGF0dGVybjogXnllcyQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRlc2NyaXB0aW9u\
OiAiVHlwZSAneWVzJyBhYm92ZSB0byBhY2NlcHQgdGhlIEFuZHJvaWQgU0RLIExpY2Vuc2UgQWdy\
ZWVtZW50LiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9zdHVkaW8vdGVybXMuaHRtbCIK\
ICAgICAgdGl0bGU6IEFuZHJvaWQgU0RLIExpY2Vuc2UgQWdyZWVtZW50CiAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQgU0RLCiAgICAtIG5hbWU6IEFORFJP\
SURfU0RLX0NPTkZJRwogICAgICBkZWZhdWx0OiB8CiAgICAgICAgW2Jhc2VdCiAgICAgICAgdG9v\
bHMKICAgICAgICBwbGF0Zm9ybS10b29scwogCiAgICAgICAgW3BsYXRmb3Jtc10KICAgICAgICBh\
bmRyb2lkLTI3CiAgICAgICAgYW5kcm9pZC0yNgogICAgICAgIGFuZHJvaWQtMjUKICAgICAgICAg\
CiAgICAgICAgW2J1aWxkLXRvb2xzXQogICAgICAgIDI3LjAuMwogICAgICAgIDI3LjAuMgogICAg\
ICAgIDI3LjAuMQogICAgICAgIDI2LjAuMgogICAgICAgIDI2LjAuMQogICAgICAgIDI2LjAuMAog\
ICAgICAgIDI1LjAuMwogICAgICAgIDI1LjAuMgogICAgICAgICAKICAgICAgICBbZXh0cmFzOmdv\
b2dsZV0KICAgICAgICBnb29nbGVfcGxheV9zZXJ2aWNlcwogICAgICAgIG0ycmVwb3NpdG9yeQog\
ICAgICAgICAKICAgICAgICBbZXh0cmFzOmFuZHJvaWRdCiAgICAgICAgbTJyZXBvc2l0b3J5CiAg\
ICAgICAgIAogICAgICAgIFtleHRyYXM6bTJyZXBvc2l0b3J5OmNvbTphbmRyb2lkOnN1cHBvcnQ6\
Y29uc3RyYWludDpjb25zdHJhaW50LWxheW91dF0KICAgICAgICAxLjAuMAogICAgICAgIDEuMC4x\
CiAgICAgICAgMS4wLjIKICAgICAgICAgCiAgICAgICAgW2V4dHJhczptMnJlcG9zaXRvcnk6Y29t\
OmFuZHJvaWQ6c3VwcG9ydDpjb25zdHJhaW50OmNvbnN0cmFpbnQtbGF5b3V0LXNvbHZlcl0KICAg\
ICAgICAxLjAuMAogICAgICAgIDEuMC4yCiAgICAgICAgIAogICAgICAgIFtrZXlzdG9yZV0KICAg\
ICAgICBhbGlhcz1BbmRyb2lkRGVidWdLZXkKICAgICAgICBuYW1lPUFHCiAgICAgICAgdW5pdD1B\
ZXJvR2VhcgogICAgICAgIG9yZz1SZWRIYXQKICAgICAgICBsb2M9V2F0ZXJmb3JkCiAgICAgICAg\
c3RhdGU9V0QKICAgICAgICBjb3VudHJ5PUlSTAogICAgICAgIHN0b3JlcGFzcz1hbmRyb2lkCiAg\
ICAgICAga2V5cGFzcz1hbmRyb2lkCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X3R5\
cGU6IHRleHRhcmVhCiAgICAgIGRlc2NyaXB0aW9uOiAiQW5kcm9pZCBTREsgY29uZmlnIGNvbnRl\
bnQiCiAgICAgIHRpdGxlOiBBbmRyb2lkIFNESyBwYWNrYWdlIGNvbmZpZwogICAgICByZXF1aXJl\
ZDogRmFsc2UKICAgICAgdXBkYXRhYmxlOiBUcnVlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJv\
aWQgU0RLCiAgICAtIG5hbWU6IEFORFJPSURfU0RLX1ZPTFVNRV9TSVpFCiAgICAgIGRlZmF1bHQ6\
ICIxMEdpIgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246ICJQbGVhc2Ugc3Bl\
Y2lmeSB0aGUgdm9sdW1lIHNpemUgZm9yIEFuZHJvaWQgU0RLIgogICAgICB0aXRsZTogVm9sdW1l\
IFNpemUgZm9yIEFuZHJvaWQgU0RLCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICBkaXNwbGF5\
X2dyb3VwOiBBbmRyb2lkIFNESwogICAgLSBuYW1lOiBBTkRST0lEX1NMQVZFX0NQVV9SRVFVRVNU\
CiAgICAgIGRlZmF1bHQ6ICI1MDBtIgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRp\
b246ICJQbGVhc2Ugc3BlY2lmeSB0aGUgQ1BVIHJlc291cmNlIHRvIHJlcXVlc3QgZm9yIHRoZSBB\
bmRyb2lkIHNsYXZlIHBvZHMiCiAgICAgIHRpdGxlOiBDUFUgcmVzb3VyY2UgdG8gcmVxdWVzdCBm\
b3IgdGhlIEFuZHJvaWQgc2xhdmUgcG9kcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgZGlz\
cGxheV9ncm91cDogQW5kcm9pZCBTbGF2ZSBQb2RzCiAgICAtIG5hbWU6IEFORFJPSURfU0xBVkVf\
Q1BVX0xJTUlUCiAgICAgIGRlZmF1bHQ6ICIyMDAwbSIKICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
IGRlc2NyaXB0aW9uOiAiUGxlYXNlIHNwZWNpZnkgdGhlIENQVSByZXNvdXJjZSBsaW1pdCBmb3Ig\
dGhlIEFuZHJvaWQgc2xhdmUgcG9kcyIKICAgICAgdGl0bGU6IENQVSByZXNvdXJjZSBsaW1pdCBm\
b3IgdGhlIEFuZHJvaWQgc2xhdmUgcG9kcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgZGlz\
cGxheV9ncm91cDogQW5kcm9pZCBTbGF2ZSBQb2RzCiAgICAtIG5hbWU6IEFORFJPSURfU0xBVkVf\
TUVNT1JZX1JFUVVFU1QKICAgICAgZGVmYXVsdDogIjUwME1pIgogICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgZGVzY3JpcHRpb246ICJQbGVhc2Ugc3BlY2lmeSB0aGUgbWVtb3J5IHJlc291cmNlIHRv\
IHJlcXVlc3QgZm9yIHRoZSBBbmRyb2lkIHNsYXZlIHBvZHMiCiAgICAgIHRpdGxlOiBNZW1vcnkg\
cmVzb3VyY2UgdG8gcmVxdWVzdCBmb3IgdGhlIEFuZHJvaWQgc2xhdmUgcG9kcwogICAgICByZXF1\
aXJlZDogRmFsc2UKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTbGF2ZSBQb2RzCiAgICAt\
IG5hbWU6IEFORFJPSURfU0xBVkVfTUVNT1JZX0xJTUlUCiAgICAgIGRlZmF1bHQ6ICIzMDAwTWki\
CiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5IHRo\
ZSBtZW1vcnkgcmVzb3VyY2UgbGltaXQgZm9yIHRoZSBBbmRyb2lkIHNsYXZlIHBvZHMiCiAgICAg\
IHRpdGxlOiBNZW1vcnkgcmVzb3VyY2UgbGltaXQgZm9yIHRoZSBBbmRyb2lkIHNsYXZlIHBvZHMK\
ICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFuZHJvaWQgU2xhdmUg\
UG9kcwogICAgLSBuYW1lOiBKRU5LSU5TX1ZPTFVNRV9TSVpFCiAgICAgIGRlZmF1bHQ6ICI0MEdp\
IgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246ICJQbGVhc2Ugc3BlY2lmeSB0\
aGUgdm9sdW1lIHNpemUgZm9yIEplbmtpbnMiCiAgICAgIHRpdGxlOiBWb2x1bWUgU2l6ZSBmb3Ig\
SmVua2lucwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgZGlzcGxheV9ncm91cDogSmVua2lu\
cwogICAgCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
